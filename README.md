# 项目简介

## 待做功能

### 操作

需求：
- 监听用户退出网页事件，进行提示是否退出
- 是否开启上一页，下一页查看上一个，下一个单词
- 完成每日背诵计划后，是否弹出一个当日完成的单词列表；⛳
- 是否开启特定区域（比如按钮、区域块）进行单词切换
- 是否开启聚焦模式，仅展示单词及其中文含义，不展示其他内容，且使用大字模式，更直观具体

### 行为分析

需求：分析用户每日背诵单词的个数、每个单词背诵的次数、每日复习的单词个数与次数

呈现：使用柱状图/折线图/日历热力图/日历坐标系的方式展示该用户所有日期的背诵/复习单词的行为数据，可一次只展示当周，当月每日的数据，或者是当年每月的数据，或者是所有的数据

需求：按日期显示/查找用户背诵的单词，点进去之后展现该日单词列表（图表兼富文本），导出该日单词列表数据（html带样式格式导出图片）

需求：查看单词背诵的次数（使用矩形树图）

需求：呈现背诵达标率（使用仪表盘）

### 复盘

定义：
- 利用vue的组合式api和生命周期钩子封装复用有状态逻辑的函数
- 函数参数可接收ref，和非ref值（unref：将ref变为非ref）
- 组合式函数采用`usePascalCase`的形式命名
- 组合式函数不仅是为了复用，也能让代码组织更加清晰。能够基于逻辑问题将组件代码拆分成更小的功能函数

注意：
- 组合式函数在`script setup`/`setup()`中应始终被同步调用，在某些场景下也可以在onMounted这些生命周期钩子中调用，这是为了让vue能够确定当前正在被执行的到底是哪个实例，只有确定了当前组件实例，才能：将生命周期钩子等api注册在当前的组件上，将计算属性和监听器注册到当前组件上，以便在组件卸载时停止监听，避免内存泄露
- script setup是唯一在调用await之后仍可调用组合式函数的地方，编译器会在异步操作之后自动恢复当前组件实例
- 组合式函数可接收一般变量和响应式变量（例如ref，可对响应式变量进行监听追踪）作为参数。最好在处理参数时对两者进行兼容，即处理响应式变量时，使用unref函数获取变量的值（响应式变量返回.value，否则原样返回）；同时若操作会根据响应式变量变化而变化，应该使用watch监听响应式变量，或者在watchEffect中调用unref解构响应式变量追踪其变化
- 推荐在组合式函数中始终返回一个包含多个ref的普通非响应式对象（即组合式函数返回`{ a: ref(xx), b: ref(xx) }`），这样在对象被解构时，对象属性仍能保持响应性，因为返回一个响应式对象在对象解构时会丢失和组合式函数内状态的响应性连接。若希望以对象属性的方式使用组合式函数中返回的状态，可以在调用组合式函数的时候使用reactive进行包裹（例如`reactive(useFn())`）
- 在组合式函数中执行相关操作时，应当在正确的生命周期中访问（比如访问dom，应该在挂载之后，即onMounted钩子中）；同时确保在onUnmounted中清除带来的某些操作（比如事件监听器）。
- 每一个调用组合式函数的组件实例会创建其独有的状态拷贝，组件实例之间不会互相影响。若想在组件中共享状态，可使用状态管理相关的知识点。
- 组合式函数可随意封装

## 复盘

1. 获取学习数据、获取总数据、获取范围数据、获取今日数据
2. 可学习数据 = （总数据 - 学习数据）in 范围数据
3. 单词卡，随机数